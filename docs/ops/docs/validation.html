<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Validation - go-msx</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../modules.html"><strong aria-hidden="true">1.1.</strong> Module Overview</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Cross-Cutting Concerns</li><li class="chapter-item expanded "><a href="../../log/index.html"><strong aria-hidden="true">2.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../../types/docs/errors.html"><strong aria-hidden="true">3.</strong> Errors</a></li><li class="chapter-item expanded "><a href="../../config/index.html"><strong aria-hidden="true">4.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../config/consulprovider/index.html"><strong aria-hidden="true">4.1.</strong> Consul Configuration Provider</a></li></ol></li><li class="chapter-item expanded "><a href="../../app/index.html"><strong aria-hidden="true">5.</strong> Lifecycle</a></li><li class="chapter-item expanded "><a href="../../app/context.html"><strong aria-hidden="true">6.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="../../stats/index.html"><strong aria-hidden="true">7.</strong> Stats</a></li><li class="chapter-item expanded "><a href="../../trace/index.html"><strong aria-hidden="true">8.</strong> Tracing</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Application Patterns</li><li class="chapter-item expanded "><a href="../../types/docs/operations.html"><strong aria-hidden="true">9.</strong> Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../types/docs/middleware.html"><strong aria-hidden="true">9.1.</strong> Middleware</a></li><li class="chapter-item expanded "><a href="../../types/docs/decorators.html"><strong aria-hidden="true">9.2.</strong> Decorators</a></li><li class="chapter-item expanded "><a href="../../types/docs/filters.html"><strong aria-hidden="true">9.3.</strong> Filters</a></li><li class="chapter-item expanded "><a href="../../trace/docs/operations.html"><strong aria-hidden="true">9.4.</strong> Traced Operations</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> Handlers</div></li></ol></li><li class="chapter-item expanded "><a href="../../ops/docs/ports.html"><strong aria-hidden="true">10.</strong> Ports</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ops/docs/input-ports.html"><strong aria-hidden="true">10.1.</strong> Input Ports</a></li><li class="chapter-item expanded "><a href="../../ops/docs/output-ports.html"><strong aria-hidden="true">10.2.</strong> Output Ports</a></li><li class="chapter-item expanded "><a href="../../ops/docs/validation.html" class="active"><strong aria-hidden="true">10.3.</strong> Validation</a></li></ol></li><li class="chapter-item expanded "><a href="../../types/docs/services.html"><strong aria-hidden="true">11.</strong> Services</a></li><li class="chapter-item expanded "><a href="../../webservice/controller.html"><strong aria-hidden="true">12.</strong> ðŸ’€ REST Controller Mk I </a></li><li class="chapter-item expanded "><a href="../../ops/restops/docs/controller.html"><strong aria-hidden="true">13.</strong> ðŸŽ‰ REST Controller Mk II </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ops/restops/docs/input-ports.html"><strong aria-hidden="true">13.1.</strong> REST Input Ports</a></li><li class="chapter-item expanded "><a href="../../ops/restops/docs/output-ports.html"><strong aria-hidden="true">13.2.</strong> REST Output Ports</a></li><li class="chapter-item expanded "><a href="../../ops/restops/docs/middleware.html"><strong aria-hidden="true">13.3.</strong> Middleware</a></li></ol></li><li class="chapter-item expanded "><a href="../../sqldb/repository.html"><strong aria-hidden="true">14.</strong> ðŸ’€ CRUD Repository </a></li><li class="chapter-item expanded "><a href="../../sqldb/docs/new_repositories_typed.html"><strong aria-hidden="true">15.</strong> ðŸŽ‰Typed Repository</a></li><li class="chapter-item expanded "><a href="../../sqldb/docs/new_repositories_goqu.html"><strong aria-hidden="true">16.</strong> ðŸŽ‰Goqu Repository</a></li><li class="chapter-item expanded "><a href="../../sqldb/docs/new_repositories_sql.html"><strong aria-hidden="true">17.</strong> ðŸŽ‰SQL Repository</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">18.</strong> Migration</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">19.</strong> Integration</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../integration/docs/openapi.html"><strong aria-hidden="true">19.1.</strong> ðŸŽ‰ OpenAPI Client </a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.</strong> Streaming</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ops/streamops/index.html"><strong aria-hidden="true">20.1.</strong> ðŸŽ‰ Stream Operations </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../ops/streamops/ports.html"><strong aria-hidden="true">20.1.1.</strong> Ports</a></li><li class="chapter-item expanded "><a href="../../ops/streamops/publishers.html"><strong aria-hidden="true">20.1.2.</strong> Publishers</a></li><li class="chapter-item expanded "><a href="../../ops/streamops/subscribers.html"><strong aria-hidden="true">20.1.3.</strong> Subscribers</a></li><li class="chapter-item expanded "><a href="../../schema/asyncapi/index.html"><strong aria-hidden="true">20.1.4.</strong> AsyncApi</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.</strong> Stream Providers</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.1.</strong> Kafka</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.2.</strong> SQL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.3.</strong> GoChannel</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.2.4.</strong> Redis</div></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">Utilities</li><li class="chapter-item expanded "><div><strong aria-hidden="true">21.</strong> Audit Events</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">22.</strong> Auditable Models</div></li><li class="chapter-item expanded "><a href="../../cache/lru/index.html"><strong aria-hidden="true">23.</strong> Cache</a></li><li class="chapter-item expanded "><a href="../../certificate/index.html"><strong aria-hidden="true">24.</strong> Certificates and TLS</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">25.</strong> Executing Commands</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">26.</strong> Health Checks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">27.</strong> Http Client</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">28.</strong> Leader Election</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">29.</strong> Pagination</div></li><li class="chapter-item expanded "><a href="../../resource/index.html"><strong aria-hidden="true">30.</strong> Resources</a></li><li class="chapter-item expanded "><a href="../../retry/index.html"><strong aria-hidden="true">31.</strong> Retry</a></li><li class="chapter-item expanded "><a href="../../sanitize/index.html"><strong aria-hidden="true">32.</strong> Sanitization</a></li><li class="chapter-item expanded "><a href="../../scheduled/index.html"><strong aria-hidden="true">33.</strong> Scheduled Tasks</a></li><li class="chapter-item expanded "><a href="../../transit/index.html"><strong aria-hidden="true">34.</strong> Transit Encryption</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">35.</strong> Validation</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Code Generation (skel)</li><li class="chapter-item expanded "><a href="../../skel/index.html"><strong aria-hidden="true">36.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../skel/docs/installation.html"><strong aria-hidden="true">37.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../../skel/docs/usage.html"><strong aria-hidden="true">38.</strong> Usage</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">39.</strong> Projects</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../skel/docs/projects-generic.html"><strong aria-hidden="true">39.1.</strong> Generic Microservice</a></li><li class="chapter-item expanded "><a href="../../skel/docs/projects-beats.html"><strong aria-hidden="true">39.2.</strong> Probes (Beats)</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">39.3.</strong> Service Pack Microservice</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">39.4.</strong> Service Pack UI</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">40.</strong> Continuous Integration</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">41.</strong> Web Services</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">41.1.</strong> Domains</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">41.2.</strong> OpenAPI</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">42.</strong> Stream Services</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../skel/asyncapi/channels.html"><strong aria-hidden="true">42.1.</strong> Channels</a></li><li class="chapter-item expanded "><a href="../../skel/asyncapi/spec.html"><strong aria-hidden="true">42.2.</strong> AsyncAPI</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">43.</strong> Deployment</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">43.1.</strong> Kubernetes</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../skel/docs/skaffold.html"><strong aria-hidden="true">43.1.1.</strong> Skaffold</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">Builds</li><li class="chapter-item expanded "><div><strong aria-hidden="true">44.</strong> Introduction</div></li><li class="chapter-item expanded "><a href="../../build/docs/usage-make.html"><strong aria-hidden="true">45.</strong> Makefile Usage</a></li><li class="chapter-item expanded "><a href="../../build/docs/usage-build.html"><strong aria-hidden="true">46.</strong> Build Usage</a></li><li class="chapter-item expanded "><a href="../../build/docs/config.html"><strong aria-hidden="true">47.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../../build/docs/targets.html"><strong aria-hidden="true">48.</strong> Build Targets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../build/docs/targets-project.html"><strong aria-hidden="true">48.1.</strong> Project Maintenance</a></li><li class="chapter-item expanded "><a href="../../build/docs/targets-development.html"><strong aria-hidden="true">48.2.</strong> Development</a></li><li class="chapter-item expanded "><a href="../../build/docs/targets-artifacts.html"><strong aria-hidden="true">48.3.</strong> Artifacts</a></li><li class="chapter-item expanded "><a href="../../build/docs/targets-verification.html"><strong aria-hidden="true">48.4.</strong> Verification</a></li><li class="chapter-item expanded "><a href="../../build/docs/targets-publishing.html"><strong aria-hidden="true">48.5.</strong> Publishing</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Continuous Integration</li><li class="chapter-item expanded "><a href="../../checks/index.html"><strong aria-hidden="true">49.</strong> Checks ðŸŽ‰</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.</strong> Jenkins</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">For Developers of go-msx</li><li class="chapter-item expanded "><div><strong aria-hidden="true">51.</strong> Introduction</div></li><li class="chapter-item expanded "><a href="../../CONTRIBUTING.html"><strong aria-hidden="true">52.</strong> Contributing</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">53.</strong> skel: Code Generation</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../skel/docs/sequence.html"><strong aria-hidden="true">53.1.</strong> Execution Sequence</a></li><li class="chapter-item expanded "><a href="../../skel/docs/templating.html"><strong aria-hidden="true">53.2.</strong> Making templates</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">go-msx</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="validation"><a class="header" href="#validation">Validation</a></h1>
<p>Port structures use struct tags to declare JSON Schema
constraints for fields within the port and data transfer objects.</p>
<pre><code class="language-go">type driftCheckResponseInput struct {
    EventType string                 `in:&quot;header&quot; const:&quot;DriftCheck&quot;`
    Payload   api.DriftCheckResponse `in:&quot;body&quot;`
}
</code></pre>
<p>For example, in the <code>driftCheckRequestInput</code> port, the <code>EventType</code> field
specifies it must contain the constant value <code>DriftCheck</code> through the <code>const</code> tag.</p>
<p>When generating AsyncApi documentation, validation constraints specified in the port
struct or the data transfer object will automatically be included in the documentation.</p>
<h2 id="json-schema-struct-tags"><a class="header" href="#json-schema-struct-tags">JSON Schema Struct Tags</a></h2>
<p><a href="https://json-schema.org/">JSON Schema</a> is a domain-specific language used to describe constraints on values
that may be expressed using the JSON type system (null, object, array, number, string).</p>
<p>The following struct tags may be used to specify JSON Schema constraints and validators
within a port struct or a data transfer object:</p>
<ul>
<li>
<p><code>optional</code>, <code>required</code></p>
<p>Boolean entries to override the base field type optionality.  By default, pointer/slice/map and <code>types.Optional</code>
types are optional, and other types are non-optional.  Must be &quot;true&quot; or &quot;false&quot;.</p>
<pre><code class="language-go">type inPort struct {
    Expiry     types.Duration  `in=&quot;header&quot; optional=&quot;true&quot;`
    BestBefore *types.Duration `in=&quot;header&quot; required=&quot;true&quot;`
}
</code></pre>
</li>
<li>
<p><code>deprecated</code></p>
<p>Boolean to indicate the field should not be used and will be removed. Must be &quot;true&quot; or &quot;false&quot;.</p>
<pre><code class="language-go">type inPort struct {
    VmsTenant types.UUID `in=&quot;header&quot; deprecated=&quot;true&quot;`  
}
</code></pre>
</li>
<li>
<p><code>title</code>, <code>description</code></p>
<p>Expository language to help users understand the purpose of the field.</p>
<pre><code class="language-go">type outPort struct {
    ContentType string `in=&quot;header&quot; title=&quot;Content Type&quot; description=&quot;MIME type for the message body&quot; example=&quot;application/xml&quot;`
}
</code></pre>
</li>
<li>
<p><code>const</code></p>
<p>Value that the field must contain to be valid.  Equivalent to a single-valued <code>enum</code>.
Must be a scalar convertible to a valid value of the field data type.
See &quot;Port Field Constraint Handling&quot;, below for more details.</p>
<pre><code class="language-go">type MyRequest struct {
    Answer int `in=&quot;header&quot; const=&quot;42&quot;`  
}
</code></pre>
</li>
<li>
<p><code>default</code></p>
<p>Default value that the field will <em>behave as having</em> if not explicitly specified.
Must be a scalar convertible to a valid value of the field data type.
See &quot;Port Field Constraint Handling&quot;, below for more details.</p>
<pre><code class="language-go">type MyRequest struct {
    Pi float64 `in=&quot;header&quot; default=&quot;3.14&quot;`  
}
</code></pre>
</li>
<li>
<p><code>example</code></p>
<p>Example value to be presented in the schema document.
Must be a scalar convertible to a valid value of the field data type.</p>
<pre><code class="language-go">type MyRequest struct {
    Hour int   `in=&quot;header&quot; example=&quot;12&quot;`
    Minute int `in=&quot;header&quot; example=&quot;30&quot;`  
}
</code></pre>
</li>
<li>
<p><code>enum</code></p>
<p>Comma-separated list of possible values for the field.
Only these values will be accepted by the field during validation.
Must be scalars convertible to the field data type.</p>
<pre><code class="language-go">type MyResponseOutput struct {
    Code int `out=&quot;code&quot; enum=&quot;200,400,401,403,404&quot;` 
}
</code></pre>
</li>
<li>
<p><code>minimum</code>, <code>maximum</code></p>
<p>Range constraints for possible values of the field.
Only values &gt;= minimum (if specified) are valid.
Only values &lt;= maximum (if specified) are valid.
Must be scalars convertible to the field data type.</p>
<pre><code class="language-go">type MyResponseOutput struct {
    Radians float64 `out=&quot;header&quot; minimum=&quot;0&quot; maximum=&quot;6.28&quot;` 
}
</code></pre>
</li>
<li>
<p><code>minLength</code>, <code>maxLength</code></p>
<p>Length constraints for value of the field.  Applies
to <code>string</code> fields.  Must be integers if specified.</p>
<pre><code class="language-go">type MyResponse struct {
     ServiceType string `in=&quot;header&quot; minLength=&quot;4&quot; maxLength=&quot;16&quot;`
}
</code></pre>
</li>
<li>
<p><code>maxProperties</code>, <code>minProperties</code></p>
<p>Length constraints for value of the field.  Applies
to <code>object</code> fields.  Must be integers if specified.</p>
<pre><code class="language-go">type MyResponse struct {
     ServiceType map[string]string `in=&quot;header&quot; minProperties=&quot;1&quot;`
}
</code></pre>
</li>
<li>
<p><code>pattern</code></p>
<p>Regular expression that values must match to be valid.  Applies
to <code>string</code> fields.</p>
<pre><code class="language-go">type MyResponse struct {
     DeviceId string `in=&quot;header&quot; pattern=&quot;^CPE-.*$&quot;`
}
</code></pre>
</li>
<li>
<p><code>format</code></p>
<p>String identifier of pre-defined formats.  Applies
to <code>string</code> fields.  Normally will be automatic based on
the underlying field type.</p>
<pre><code class="language-go">type MyResponse struct {
     When types.Time `in=&quot;header&quot; format=&quot;date&quot;`
}
</code></pre>
</li>
<li>
<p><code>minItems</code>, <code>maxItems</code></p>
<p>Length constraints for value of the field. Applies
to <code>array</code> fields (slices).  Must be integers if specified.</p>
<pre><code class="language-go">type MyRequest struct {
     DeviceIds []types.UUID `in=&quot;body&quot; minItems=&quot;1&quot;`
     TenantIds []types.UUID `in=&quot;body&quot; maxItems=&quot;1&quot;`
}
</code></pre>
</li>
</ul>
<p>The underlying jsonschema-go library provides a few more constraints,
which you can view at the package <a href="https://pkg.go.dev/github.com/swaggest/jsonschema-go#readme-field-tags">GoDoc</a></p>
<h3 id="special-tags"><a class="header" href="#special-tags">Special Tags</a></h3>
<p>Ports have a few special tags which can be applied at the top level:</p>
<ul>
<li>
<p><code>validation</code></p>
<p>Boolean enabling or disabling validation.  Documentation will still be generated as if
validation is enabled.</p>
</li>
</ul>
<h3 id="constraints-on-named-types"><a class="header" href="#constraints-on-named-types">Constraints on Named Types</a></h3>
<p>Fields in Port structures and DTOs with simple and anonymous types may be augmented using the JSON schema
tags above.  However, named types are shared across many fields and therefore cannot be augmented in-place.
For example:</p>
<pre><code class="language-go">type DriftCheckRequest struct {
  Action                string          `json:&quot;action&quot; const:&quot;checkDrift&quot;`
  GroupId               types.UUID      `json:&quot;groupId,omitempty&quot;`
  Timestamp             types.Time      `json:&quot;timestamp&quot; minimum:&quot;2022-01-01T00:00:00Z&quot;`
  EntityLevelCompliance string          `json:&quot;entityLevelCompliance&quot; enum:&quot;full,partial&quot;`
  Standards             []ConfigPayload `json:&quot;standards,omitempty&quot; minItems:&quot;1&quot; required:&quot;true&quot;`
  ...
}
</code></pre>
<p>Fields with Named Types include:</p>
<ul>
<li><code>GroupId</code> : <code>types.UUID</code></li>
<li><code>Timestamp</code> : <code>types.Time</code></li>
</ul>
<p>These fields will ignore any schema constraints declared in the struct tag,
such as the <code>minimum</code> tag on <code>Timestamp</code>.</p>
<p>Fields with Simple or Anonymous Types include:</p>
<ul>
<li><code>Action</code> : <code>string</code></li>
<li><code>EntityLevelCompliance</code> : <code>string</code></li>
<li><code>Standards</code>: <code>[]ConfigPayload</code></li>
</ul>
<p>Each of these fields has schema constraints declared which will be honoured.
<code>Standards</code> is an array of DTOs <code>[]ConfigPayload</code> and therefore is of an anonymous
type.</p>
<h3 id="constraints-on-dto-structs"><a class="header" href="#constraints-on-dto-structs">Constraints on DTO structs</a></h3>
<p>To configure a parent DTO struct using struct tags, include an anonymous 
field <code>_</code> with the desired constraints.  For example:</p>
<pre><code class="language-go">type RemediateRequest struct {
	...
    _ struct{} `additionalProperties:&quot;false&quot; description:&quot;RemediateRequest contains a remediation request.&quot;`
}
</code></pre>
<p>This will add <code>description</code> and <code>additionalProperties</code> schema constraints
to the <code>RemediateRequest</code> struct in the schema.</p>
<h3 id="custom-schema-generation-for-named-types"><a class="header" href="#custom-schema-generation-for-named-types">Custom Schema Generation for Named Types</a></h3>
<p>The underlying jsonschema-go library provides a number of interfaces to customize
or replace the JSON schema generated for your Named Type:</p>
<ul>
<li><code>NamedEnum</code> - Provides a list of name/value pairs for your enumerable type.</li>
<li><code>Enum</code> - Provides a list of values for your enumerable type.</li>
<li><code>Preparer</code> - Intercepts the reflected JSON Schema and allows alteration.</li>
<li><code>Exposer</code> - Provides a complete parsed JSON Schema for your type.</li>
<li><code>RawExposer</code> - Provides a complete unparsed JSON Schema for your type.</li>
<li><code>OneOfExposer</code> - Provides a list of <code>oneOf</code> elements for your type.</li>
<li><code>AnyOfExposer</code> - Provides a list of <code>anyOf</code> elements for your type.</li>
<li><code>AllOfExposer</code> - Provides a list of <code>allOf</code> elements for your type.</li>
<li><code>NotExposer</code> - Provides a <code>not</code> element for your type.</li>
<li><code>IfExposer</code> - Provides an <code>if</code> element for your type.</li>
<li><code>ThenExposer</code> - Provides a <code>then</code> element for your type.</li>
<li><code>ElseExposer</code> - Provides an <code>else</code> element for your type.</li>
</ul>
<p>You can find more details about these interfaces on the package
<a href="https://pkg.go.dev/github.com/swaggest/jsonschema-go#readme-implementing-interfaces-on-a-type">GoDoc</a>.</p>
<h3 id="port-field-constraint-handling"><a class="header" href="#port-field-constraint-handling">Port Field Constraint Handling</a></h3>
<p>To ease development burden, when using <code>const</code> or <code>default</code> on a Port Field, the value will be applied
during input population (subscriber) or output population (publisher).  Note that this only applies to
scalars (e.g. headers), and only those directly contained in the Port structure.  In particular, it does
not apply to the request/response body or its sub-fields.</p>
<p>From the example at the beginning of the chapter:</p>
<pre><code class="language-go">type driftCheckRequestOutput struct {
    EventType string            `out:&quot;header&quot; const:&quot;DriftCheck&quot;`
    Payload   DriftCheckRequest `out:&quot;body&quot;`
}

type DriftCheckRequest struct {
    Action string `json:&quot;action&quot; const:&quot;checkDrift&quot;`
    ...
}
</code></pre>
<p>The <code>EventType</code> field of <code>driftCheckRequestOutput</code> will be filled with <code>DriftCheck</code> if not supplied
by the publisher, since it is a scalar, and directly contained within the Port structure.  If another
value is supplied, the schema validation will fail, so it is best to simply not supply the value.</p>
<p>The <code>Action</code> field of <code>DriftCheckRequest</code> will <em>not</em> be filled with <code>checkDrift</code> since it is not
directly contained within the Port structure.  It will be validated during schema validation to ensure
only that value is supplied.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ops/docs/output-ports.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../types/docs/services.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ops/docs/output-ports.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../types/docs/services.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../book/mermaid.min.js"></script>
        <script type="text/javascript" src="../../book/mermaid-init.js"></script>
    </body>
</html>
